(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{591:function(t,e,a){t.exports=a.p+"assets/img/MissingCreds.8a79a647.png"},592:function(t,e,a){t.exports=a.p+"assets/img/appserviceandplan.604819db.png"},593:function(t,e,a){t.exports=a.p+"assets/img/webappendpoint.5b16ac8e.png"},594:function(t,e,a){t.exports=a.p+"assets/img/deploymenterror.b1ecd993.png"},595:function(t,e,a){t.exports=a.p+"assets/img/list-of-files.4d399088.png"},596:function(t,e,a){t.exports=a.p+"assets/img/deploywebapp.c436da41.png"},597:function(t,e,a){t.exports=a.p+"assets/img/dependabot-alerts.7db0fc7e.png"},598:function(t,e,a){t.exports=a.p+"assets/img/dependabot-create-security-update.67057d18.png"},599:function(t,e){t.exports="data:image/png;base64,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"},600:function(t,e,a){t.exports=a.p+"assets/img/dependabot-pr.45ae970b.png"},772:function(t,e,a){"use strict";a.r(e);var s=a(10),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"challenge-03-deploy-to-azure-webapp-using-github-actions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#challenge-03-deploy-to-azure-webapp-using-github-actions"}},[t._v("#")]),t._v(" Challenge 03: Deploy to Azure WebApp using GitHub Actions")]),t._v(" "),e("p",[t._v("⏲️ "),e("em",[t._v("est. time to complete: 30 min.")]),t._v(" ⏲️")]),t._v(" "),e("h2",{attrs:{id:"here-is-what-you-will-learn-🎯"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#here-is-what-you-will-learn-🎯"}},[t._v("#")]),t._v(" Here is what you will learn 🎯")]),t._v(" "),e("p",[t._v("In this challenge you will learn how to:")]),t._v(" "),e("ul",[e("li",[t._v("access your Azure Subscription from GitHub Actions")]),t._v(" "),e("li",[t._v("use GitHub Secrets to securely store access credentials")]),t._v(" "),e("li",[t._v("create a Service Principal for your Azure Subscription")]),t._v(" "),e("li",[t._v("create a Resource Group in GitHub Actions")]),t._v(" "),e("li",[t._v("deploy a bicep template using GitHub Actions")]),t._v(" "),e("li",[t._v("build and deploy your WebApp to Azure AppService")])]),t._v(" "),e("h2",{attrs:{id:"table-of-contents"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[t._v("#")]),t._v(" Table of contents")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"#getting-started"}},[t._v("Getting started")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#create-azure-bicep-template"}},[t._v("Create Azure Bicep template")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#create-resource-group-and-deploy-bicep-template"}},[t._v("Create resource group and deploy Bicep template")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#create-a-simple-express-app"}},[t._v("Create a simple express app")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#deploy-appservice"}},[t._v("Deploy AppService")])]),t._v(" "),e("li",[e("a",{attrs:{href:"#finish"}},[t._v("Finish")])])]),t._v(" "),e("h2",{attrs:{id:"getting-started"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting started")]),t._v(" "),e("p",[t._v("In this challenge we will learn how to securely access your Azure Subscriptions\nfrom GitHub, how to create infrastructure from code and how to deploy into the\nfreshly created infrastructure.")]),t._v(" "),e("p",[t._v("As in the previous challenges we will start with a new repository.")]),t._v(" "),e("p",[t._v("Create one now.")]),t._v(" "),e("h3",{attrs:{id:"accessing-azure"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#accessing-azure"}},[t._v("#")]),t._v(" Accessing Azure")]),t._v(" "),e("p",[t._v("In your fresh repository create a new GitHub Actions workflow.")]),t._v(" "),e("p",[t._v("We will use the "),e("code",[t._v("Azure/login")]),t._v(" Action to give our deploy job permissions within\nour Azure Subscription. Take a look at the\n"),e("a",{attrs:{href:"https://github.com/Azure/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation"),e("OutboundLink")],1),t._v(" for the "),e("code",[t._v("Azure/login")]),t._v(" Action and\nread through the "),e("a",{attrs:{href:"https://github.com/Azure/login#configure-deployment-credentials",target:"_blank",rel:"noopener noreferrer"}},[t._v('"Configure deployment\ncredentials"'),e("OutboundLink")],1),t._v("\nsection.")]),t._v(" "),e("p",[t._v("You can use the sample workflow provided below. Just commit it into your\nrepository and watch the first execution fail.")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# az-login.yaml")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Display Account Info\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("login")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure Login\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/login@v1\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("creds")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.AZURE_CREDENTIALS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Display Azure account info\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" az account show "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("o yaml\n")])])]),e("p",[t._v("Out of the box your GitHub Pipeline will not have any credentials in place to\nlog into your Azure Subscriptions. The first run of your pipeline should fail\nwith an error message like this:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Error: Az CLI Login failed. Please check the credentials.\n")])])]),e("p",[e("img",{attrs:{src:a(591),alt:"Failed pipeline run due to missing credentials"}})]),t._v(" "),e("h3",{attrs:{id:"programmatic-access-to-azure"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#programmatic-access-to-azure"}},[t._v("#")]),t._v(" Programmatic access to Azure")]),t._v(" "),e("p",[t._v("To allow GitHub to interact with our Azure Subscriptions we need to create a\nService Account in our Azure Active Directory. This account represents not a\nuser but a service, machine or digital agent. These accounts are called\n"),e("a",{attrs:{href:"https://docs.microsoft.com/azure/active-directory/develop/app-objects-and-service-principals#service-principal-object",target:"_blank",rel:"noopener noreferrer"}},[e("strong",[t._v("Service\nPrincipal")]),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("Having read the documentation on the "),e("code",[t._v("Azure/login")]),t._v(" you might already have seen\nthe following line to create a Service Principal for role based access control.")]),t._v(" "),e("p",[t._v("Make sure to "),e("strong",[t._v("change the name")]),t._v(" for your service principal so you can identify\nit later on your Azure AD and scope the contributor access to your subscription\nby setting your subscription id for the scope.")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change the name and set use your subscription-id to create a Service Principal.")]),t._v("\naz ad sp create-for-rbac "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{name}-github-actions-sp"')]),t._v(" --sdk-auth "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--role")]),t._v(" contributor "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scopes")]),t._v(" /subscriptions/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("subscription-id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Take a "),e("strong",[t._v("secure")]),t._v(" note of the "),e("code",[t._v("json")]),t._v(" response returned by this command. You can\nreuse these credentials throughout the day.")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("📝 It is best practice to set the scope of the Service Principal based on the\n"),e("strong",[t._v("principal of least privilege")]),t._v(". Here we scope to the entire subscription so you\ncan use it to create resource groups programmatically and reuse it for the rest\nof todays challenges. On production accounts you will probably scope the access\nto a specific resource group.")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scopes")]),t._v(" /subscriptions/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("subscription-id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/resourceGroups/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("resource-group"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Or even a specific resource:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scopes")]),t._v(" /subscriptions/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("subscription-id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/resourceGroups/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("resource-group"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/providers/Microsoft.Web/sites/"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("app-name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("h3",{attrs:{id:"storing-the-secret"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#storing-the-secret"}},[t._v("#")]),t._v(" Storing the secret")]),t._v(" "),e("p",[t._v("Now that we have created the Service Principal and have acquired the necessary\naccess credentials we can store them in our repository in GitHub.")]),t._v(" "),e("p",[t._v("Navigate to your repositories "),e("code",[t._v("Settings > Secrets")]),t._v(" page and add a new secret\nnamed "),e("code",[t._v("AZURE_CREDENTIALS")]),t._v(". The value should look like this: "),e("code",[t._v('{"clientId":"xxx","clientSecret":"xxx","subscriptionId":"xxx", "tenantId":"xxx"}')]),t._v(".")]),t._v(" "),e("div",{pre:!0},[e("p",[t._v("Now we should be able to re-run our workflow file from the beginning. We\nreferenced the GitHub secret using the "),e("code",[t._v("${{ secrets.AZURE_CREDENTIALS }}")]),t._v("\nexpression in the "),e("code",[t._v("azure/login")]),t._v(" action.")])]),e("p",[t._v("Before continuing, make sure the workflow executes successfully and you can see\nyour account information in the workflow output.")]),t._v(" "),e("h2",{attrs:{id:"create-azure-bicep-template"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-azure-bicep-template"}},[t._v("#")]),t._v(" Create Azure Bicep template")]),t._v(" "),e("p",[t._v("Let's see how we can prepare our infrastructure for our WebApp deployment.")]),t._v(" "),e("p",[t._v("We will start pretty simple with just the minimal requirements to run an Azure\nApp Service. That mean deploying an App Service Plan and the App Service itself.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(592),alt:"Architecture of AppServicePlan and AppService"}})]),t._v(" "),e("p",[t._v("To be able to expand and evolve our infrastructure together with our\napplications source code, we will use "),e("em",[t._v("infrastructure as code")]),t._v(" "),e("strong",[t._v("IaC")]),t._v(" to\ndescribe the desired state of our resources.")]),t._v(" "),e("p",[t._v("Take a look a the following Azure Bicep template.")]),t._v(" "),e("div",{staticClass:"language-bicep extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bicep"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// infra.bicep")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token decorator"}},[t._v("@description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'The SKU of App Service Plan'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" planSku "),e("span",{pre:!0,attrs:{class:"token datatype class-name"}},[t._v("string")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B1'")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token decorator"}},[t._v("@maxLength")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token decorator"}},[t._v("@description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Name of environment'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" env "),e("span",{pre:!0,attrs:{class:"token datatype class-name"}},[t._v("string")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webapp'")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token decorator"}},[t._v("@description")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Resource tags object to use'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" resourceTag "),e("span",{pre:!0,attrs:{class:"token datatype class-name"}},[t._v("object")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("Environment")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" env\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("Application")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Webapp'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" location "),e("span",{pre:!0,attrs:{class:"token datatype class-name"}},[t._v("string")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resourceGroup")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" webAppName "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token interpolated-string"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app-webapp-")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),e("span",{pre:!0,attrs:{class:"token expression"}},[t._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),e("span",{pre:!0,attrs:{class:"token expression"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uniqueString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resourceGroup")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" planName "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token interpolated-string"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'plan-webapp-")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),e("span",{pre:!0,attrs:{class:"token expression"}},[t._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),e("span",{pre:!0,attrs:{class:"token expression"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uniqueString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("resourceGroup")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource")]),t._v(" appplan "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Microsoft.Web/serverfarms@2020-12-01'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" planName\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("location")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" location\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("kind")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'linux'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("sku")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" planSku\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("reserved")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("resource")]),t._v(" webapp "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Microsoft.Web/sites@2020-12-01'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" webAppName\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("location")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" location\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("tags")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" resourceTag\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("kind")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app,linux'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("serverFarmId")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" appplan"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("httpsOnly")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("clientAffinityEnabled")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("siteConfig")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("linuxFxVersion")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NODE|14-lts'")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("alwaysOn")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" webAppName "),e("span",{pre:!0,attrs:{class:"token datatype class-name"}},[t._v("string")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webAppName\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("output")]),t._v(" webAppEndpoint "),e("span",{pre:!0,attrs:{class:"token datatype class-name"}},[t._v("string")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webapp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("properties"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultHostName\n")])])]),e("p",[t._v("This template describes just the two resources we will need for now.")]),t._v(" "),e("p",[t._v("Note that we can configure this template using it's parameters "),e("code",[t._v("env")]),t._v(", "),e("code",[t._v("planSku")]),t._v("\nand "),e("code",[t._v("resourceTag")]),t._v(" and that a deployment of this template will output two values\n"),e("code",[t._v("webAppName")]),t._v(" and "),e("code",[t._v("webAppEndpoint")]),t._v(". We will use these in the following step, when\nwe deploy the template to a resource group using our workflow in GitHub.")]),t._v(" "),e("p",[t._v("Create a new "),e("code",[t._v("infra.bicep")]),t._v(" file in your repository containing the bicep template\nabove.")]),t._v(" "),e("p",[t._v("If you want to try out the bicep template from your local machine before\nautomating everything in GitHub you can do so by creating a new resource group.")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("az group create "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" bicep-template-test "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--location")]),t._v(" westeurope\n")])])]),e("p",[t._v("Then deploy the template to that resource group like this:")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("az deployment group create "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" bicep-template-test --template-file infra.bicep\n")])])]),e("p",[t._v("If you do this don't forget to delete the resource group when you are done.")]),t._v(" "),e("h2",{attrs:{id:"create-resource-group-and-deploy-bicep-template"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-resource-group-and-deploy-bicep-template"}},[t._v("#")]),t._v(" Create resource group and deploy Bicep template")]),t._v(" "),e("p",[t._v("Let's go back to our GitHub Actions workflow from the beginning.")]),t._v(" "),e("p",[t._v("We will start by renaming and extending the workflow file to do the following:")]),t._v(" "),e("ul",[e("li",[t._v("declare variables for all steps in the entire workflow")]),t._v(" "),e("li",[t._v("checkout the repository")]),t._v(" "),e("li",[t._v("log in to Azure")]),t._v(" "),e("li",[t._v("create a new resource group")]),t._v(" "),e("li",[t._v("deploy the bicep template to that group")]),t._v(" "),e("li",[t._v("print one of the template outputs in the workflow log")])]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# deploy-infra.yaml")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Bicep template\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change this if more then one user is deploying to")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the same subscription")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("RESOURCE_GROUP_NAME")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" github"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("bicep"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rg\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("RESOURCE_GROUP_LOCATION")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" westeurope\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ENV_NAME")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" devd4\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy-infra")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure Login\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/login@v1\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("creds")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.AZURE_CREDENTIALS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Create Resource Group\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          az group create\n          -l ${{ env.RESOURCE_GROUP_LOCATION }}\n          -n ${{ env.RESOURCE_GROUP_NAME }}")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Bicep template\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" azure/arm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@v1\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" infra\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resourceGroupName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" env.RESOURCE_GROUP_NAME "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./infra.bicep\n          "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Here we pass the template parameters to the deployment")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("parameters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n            env=${{ env.ENV_NAME }}")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Print WebApp endpoint\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Here we read the outputs of our previously deployed template")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//$"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" steps.infra.outputs.webAppEndpoint "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("With the updated workflow file, the stored secret and the "),e("code",[t._v("infra.bicep")]),t._v(" template\nin place, we should be able to run our first deployment directly into our Azure\nsubscription.")]),t._v(" "),e("p",[t._v("Check the workflow log. You should be able to find the "),e("code",[t._v("Print WebApp endpoint")]),t._v("\nstep and within the link to your freshly deployed app service. You can also take\na look at the Azure Portal to make sure the desired resources have been\ndeployed.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(593),alt:"WebApp endpoint being printed to the workflow log"}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("📝 Should you run into any errors during the template deployment steps, you can\ncheck the resource groups deployment tab on the Azure Portal to get more\ninformation on what went wrong.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(594),alt:"Resource group deployment error detail on Azure Portal"}})])]),t._v(" "),e("h2",{attrs:{id:"create-a-simple-express-app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-simple-express-app"}},[t._v("#")]),t._v(" Create a simple express app")]),t._v(" "),e("p",[t._v("You should have just seen the welcome page for the Azure App Service. Now we\nwant to see how we could deploy our own application to the App Service.")]),t._v(" "),e("p",[t._v("In this section we will use\n"),e("a",{attrs:{href:"https://expressjs.com/en/starter/generator.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("express-generator"),e("OutboundLink")],1),t._v(" to generate\na small nodejs express app and make sure we can run it locally.")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("npx express-generator@v4.16.1 ./ "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--view")]),t._v(" pug "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--git")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" start\n")])])]),e("p",[t._v("This should start a small web application on\n"),e("a",{attrs:{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("localhost:3000")]),e("OutboundLink")],1),t._v(". If everything checks out for you\nfeel free to look around the app and don't forget to commit and push the app to\nyour repository.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('git add .\ngit commit -m "Add simple express app"\ngit push\n')])])]),e("p",[t._v("With a proper web application in place, we can now take a look at how to deploy\nthis to the Azure App Service.")]),t._v(" "),e("h2",{attrs:{id:"deploy-appservice"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploy-appservice"}},[t._v("#")]),t._v(" Deploy AppService")]),t._v(" "),e("p",[t._v("By now your repositories content should look something like this:")]),t._v(" "),e("p",[e("img",{attrs:{src:a(595),alt:"List of files your repository"}})]),t._v(" "),e("p",[t._v("You should have a workflow file under "),e("code",[t._v(".github/workflows/")]),t._v(", an "),e("code",[t._v("infra.bicep")]),t._v(" and\nvarious files and folders specific to the generated express app.")]),t._v(" "),e("p",[t._v("Let's go to our workflow file and extend it by creating a second job named\n"),e("code",[t._v("deploy-webapp")]),t._v(" and an output that we can reference for our "),e("code",[t._v("deploy-infra")]),t._v(" job.")]),t._v(" "),e("p",[t._v("The new "),e("code",[t._v("deploy-webapp")]),t._v(" job runs the following steps:")]),t._v(" "),e("ul",[e("li",[t._v("check out the source code")]),t._v(" "),e("li",[t._v("setup nodejs 12")]),t._v(" "),e("li",[t._v("install the npm dependencies from the lockfile")]),t._v(" "),e("li",[t._v("login to Azure")]),t._v(" "),e("li",[t._v("deploy to the Azure App Service")])]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#deploy.yaml")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CI\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("RESOURCE_GROUP_NAME")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" github"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("bicep"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rg\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("RESOURCE_GROUP_LOCATION")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" westeurope\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ENV_NAME")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" devd4\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy-infra")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The output can be read from other jobs that depend on this one")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("outputs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("webAppName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" steps.infra.outputs.webAppName "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure Login\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/login@v1\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("creds")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.AZURE_CREDENTIALS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Create ResourceGroup\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          az group create\n          -l ${{ env.RESOURCE_GROUP_LOCATION }}\n          -n ${{ env.RESOURCE_GROUP_NAME }}")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" azure/arm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@v1\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" infra\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resourceGroupName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" env.RESOURCE_GROUP_NAME "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./infra.bicep\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("parameters")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" env=$"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" env.ENV_NAME "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Print WebApp endpoint\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//$"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" steps.infra.outputs.webAppEndpoint "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy-webapp")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("needs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("deploy"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("infra"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Setup Node.js environment\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v2.2.0\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 12.x\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Npm install\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm ci\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure Login\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/login@v1\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("creds")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.AZURE_CREDENTIALS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Azure WebApp\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Azure/webapps"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@v2\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# We reference the webAppName output of the deploy-infra job")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app-name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" needs.deploy"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("infra.outputs.webAppName "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("startup-command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm start\n")])])]),e("p",[t._v("Once you've updated an started your workflow you should see both dependant jobs\nin graphical overview on your workflows summary page.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(596),alt:"Deployment with two depending jobs running"}})]),t._v(" "),e("p",[t._v("Wait for the deployment to complete and access your webapps endpoint again from your browser.\nYou should see the deployed express app running on your App Service.")]),t._v(" "),e("h2",{attrs:{id:"enable-dependabot-security-updates-optional"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#enable-dependabot-security-updates-optional"}},[t._v("#")]),t._v(" Enable Dependabot security updates - Optional")]),t._v(" "),e("p",[t._v("Now that we have our app up and running, let's take a look at dependency\nmanagement.")]),t._v(" "),e("p",[t._v("The application we've generated is a simple nodejs express app. As such it comes\nwith quite a few "),e("em",[t._v("npm")]),t._v(" dependencies. Every single software dependency can introduce\npossible security vulnerabilities into our application. For large projects,\nmanaging and updating all these dependencies can be quite a challenge.")]),t._v(" "),e("p",[t._v("GitHub has a build-in feature to help you manage your software dependencies\ncalled "),e("em",[t._v("Dependabot")]),t._v(". Dependabot should already be enabled by default on your\nrepository and have created a first security report of your software\ndependencies by now. Take a look at the "),e("code",[t._v("Security > Dependabot alerts")]),t._v(" tab of\nyour repository now.")]),t._v(" "),e("p",[t._v("You should see something like this:")]),t._v(" "),e("p",[e("img",{attrs:{src:a(597),alt:"Dependabot alerts displayed on the security tab of yourrepository"}})]),t._v(" "),e("p",[t._v("In this sample we can see two dependencies with "),e("em",[t._v("high severity")]),t._v(" vulnerabilities\ndetected. They are related to remote code execution for applications running the\n"),e("code",[t._v("pug")]),t._v(" template engine. Since we only deploy our application as a static website\nwe are not directly affected by this vulnerability but still might want to fix it.")]),t._v(" "),e("p",[t._v("We can also see "),e("code",[t._v("clean-css")]),t._v(" dependency marked as "),e("em",[t._v("low severity")]),t._v(" where untrusted\ninput might lead to a compute heavy operation that opens your application to\ndenial of service attacks. This also does not affect our static compiled\nwebsite.")]),t._v(" "),e("p",[t._v("Now let's see how we can use GitHub to help us fix these issues.")]),t._v(" "),e("p",[t._v("We have to options. We can manually try to generate a fix for a security\nvulnerability by using the "),e("code",[t._v("Create Dependabot security update")]),t._v(" button on the\nvulnerabilities detail page.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(598),alt:"Vulnerability details page with button to create securityupdate"}})]),t._v(" "),e("p",[t._v("The second option is to enable automatic creation of "),e("em",[t._v("Dependabot security\nupdates")]),t._v(" on your repositories "),e("code",[t._v("Settings > Security & analysis")]),t._v(" page.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(599),alt:"Closeup of the Settings, Security and analysispage"}})]),t._v(" "),e("p",[t._v("Enabling this option will automatically open pull requests for security\nvulnerabilities on your dependencies. I highly recommend you to enable this\noption, especially if you have a strong CI and testing setup in place, as it\nallows you to fix some of these dependencies in an easy and fast manner.")]),t._v(" "),e("p",[t._v("Having opted for one of the mentioned steps you should see a pull request appear\non your repositories "),e("code",[t._v("Pull requests")]),t._v(" tab. Go ahead and merge it then take a look\nat the Dependabot alerts again. They should have disappeared.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(600),alt:"Pull request that was opened automatically byDependabot"}})]),t._v(" "),e("h2",{attrs:{id:"finish"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#finish"}},[t._v("#")]),t._v(" Finish")]),t._v(" "),e("p",[t._v("Congratulations! You've just deployed your first infrastructure and webapp using GitHub Actions.")]),t._v(" "),e("p",[t._v("Feel free to make a few minor changes to the webapp and see how the updates to\nyour repository trigger a new deployment updating the WebApp in place.")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/day4/challenges/02-github-actions-intro.html"}},[t._v("◀ Previous challenge")]),t._v(" | "),e("RouterLink",{attrs:{to:"/day4/"}},[t._v("🔼 Day 4")]),t._v(" | "),e("RouterLink",{attrs:{to:"/day4/challenges/04-challenge-azdc-repo.html"}},[t._v("Next challenge ▶")])],1)])}),[],!1,null,null,null);e.default=n.exports}}]);