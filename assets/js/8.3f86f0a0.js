(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{385:function(s,t,e){s.exports=e.p+"assets/img/portal_createresources.cca835dc.png"},386:function(s,t,e){s.exports=e.p+"assets/img/portal_webapp.c40cbc2b.png"},387:function(s,t,e){s.exports=e.p+"assets/img/portal_webappoverview.d2e6f604.png"},388:function(s,t,e){s.exports=e.p+"assets/img/browser_webapp.291cc7ac.png"},389:function(s,t,e){s.exports=e.p+"assets/img/vscode_start.9ed3aa8a.png"},390:function(s,t,e){s.exports=e.p+"assets/img/vscode_debugger.8197e3e7.png"},391:function(s,t,e){s.exports=e.p+"assets/img/vscode_launch.6ec5790e.png"},392:function(s,t,e){s.exports=e.p+"assets/img/vscode_debug.af638ed5.png"},393:function(s,t,e){s.exports=e.p+"assets/img/browser_welcome.918b7a1b.png"},394:function(s,t,e){s.exports=e.p+"assets/img/vscode_deploy.9409d3ec.png"},395:function(s,t,e){s.exports=e.p+"assets/img/vscode_deploying.4a0e940d.png"},396:function(s,t,e){s.exports=e.p+"assets/img/browser_webappdevcollege.4f9eeca7.png"},397:function(s,t,e){s.exports=e.p+"assets/img/portal_staging.1f4c988f.png"},398:function(s,t,e){s.exports=e.p+"assets/img/browser_staging.8e486aff.png"},399:function(s,t,e){s.exports=e.p+"assets/img/portal_slotoverview.8d998fe9.png"},400:function(s,t,e){s.exports=e.p+"assets/img/browser_slotwebsite.ed889f3e.png"},401:function(s,t,e){s.exports=e.p+"assets/img/portal_swap.e989c257.png"},740:function(s,t,e){"use strict";e.r(t);var a=e(10),n=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"challenge-1-azure-web-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#challenge-1-azure-web-apps"}},[s._v("#")]),s._v(" Challenge 1: Azure Web Apps")]),s._v(" "),t("p",[s._v("‚è≤Ô∏è "),t("em",[s._v("Est. time to complete: 45 min.")]),s._v(" ‚è≤Ô∏è")]),s._v(" "),t("h2",{attrs:{id:"here-is-what-you-will-learn-üéØ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#here-is-what-you-will-learn-üéØ"}},[s._v("#")]),s._v(" Here is what you will learn üéØ")]),s._v(" "),t("p",[s._v("In this challenge you will learn how to:")]),s._v(" "),t("ul",[t("li",[s._v("create an AppService Plan / Azure Web App")]),s._v(" "),t("li",[s._v("create and deploy an ASP.NET Core Web App to Azure")]),s._v(" "),t("li",[s._v("create and configure WebApp slots")]),s._v(" "),t("li",[s._v("use slots to deploy new versions of your web application with near-zero downtime")])]),s._v(" "),t("h2",{attrs:{id:"table-of-contents"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[s._v("#")]),s._v(" Table Of Contents")]),s._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"#create-an-azure-web-app"}},[s._v("Create an Azure Web App")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#create-a-sample-application"}},[s._v("Create a Sample Application")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#deploy-the-sample-app-to-azure"}},[s._v("Deploy the Sample App to Azure")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#working-with-deployment-slots-optional-but-recommended"}},[s._v("Working with Deployment Slots (optional - but recommended)")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#azure-samples"}},[s._v("Azure Samples")])]),s._v(" "),t("li",[t("a",{attrs:{href:"#cleanup"}},[s._v("Cleanup")])])]),s._v(" "),t("h2",{attrs:{id:"create-an-azure-web-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-an-azure-web-app"}},[s._v("#")]),s._v(" Create an Azure Web App")]),s._v(" "),t("p",[s._v("You have two options to create an Azure Web App: use either the "),t("em",[s._v("Azure Portal")]),s._v(" or the "),t("em",[s._v("Azure Command Line Interface")]),s._v(". We will walk you through both options in the following sections.")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("üìù You can also work with both, just make sure to use different names when creating the web app the second time!")])]),s._v(" "),t("h3",{attrs:{id:"option-1-azure-portal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option-1-azure-portal"}},[s._v("#")]),s._v(" Option 1: Azure Portal")]),s._v(" "),t("p",[s._v("Go to the Azure Portal and click on "),t("strong",[s._v('"Create a resource"')]),s._v(", in the next view choose "),t("strong",[s._v('"Web App"')]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:e(385),alt:"create",title:"create"}})]),s._v(" "),t("p",[s._v("When you reached the "),t("strong",[s._v('"Create Web App"')]),s._v(" wizard, follow the steps below:")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Name")]),s._v(" "),t("th",[s._v("Value")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("em",[s._v("Subscription")])]),s._v(" "),t("td",[s._v("Choose the correct subscription")])]),s._v(" "),t("tr",[t("td",[t("em",[s._v("Resource Group")])]),s._v(" "),t("td",[s._v('create a new one and name it "myFirstWebApps-rg"')])]),s._v(" "),t("tr",[t("td",[t("em",[s._v("Instance Details")])]),s._v(" "),t("td",[s._v("Enter a name for your Web App (this must be a "),t("em",[s._v("globally unique")]),s._v(" name!)")])]),s._v(" "),t("tr",[t("td",[t("em",[s._v("Publish")])]),s._v(" "),t("td",[s._v("Code")])]),s._v(" "),t("tr",[t("td",[t("em",[s._v("Runtime")])]),s._v(" "),t("td",[s._v(".NET 6 (LTS)")])]),s._v(" "),t("tr",[t("td",[t("em",[s._v("Operation System")])]),s._v(" "),t("td",[s._v("Windows")])]),s._v(" "),t("tr",[t("td",[t("em",[s._v("Region")])]),s._v(" "),t("td",[s._v("West Europe")])]),s._v(" "),t("tr",[t("td",[t("em",[s._v("App Service Plan")])]),s._v(" "),t("td",[s._v("Create a new plan and choose S1 for "),t("code",[s._v("SKU and Size")])])])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("üìù To get familiar with other sizes, click "),t("strong",[s._v('"Change size"')]),s._v(" in the App Service Plan section.")])]),s._v(" "),t("p",[s._v("Click "),t("strong",[s._v('"Next: Monitoring"')]),s._v(".")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("Name")]),s._v(" "),t("th",[s._v("Value")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("em",[s._v("AppInsights")])]),s._v(" "),t("td",[s._v("Enable AppInsights and create a new instance for it")])])])]),s._v(" "),t("p",[s._v("When done, proceed to the "),t("strong",[s._v('"Review + create"')]),s._v(" screen.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(386),alt:"review",title:"review"}})]),s._v(" "),t("p",[s._v("Check that all the properties are filled with the expected values and click "),t("strong",[s._v('"Create"')]),s._v(".")]),s._v(" "),t("p",[s._v("When the deployment has finished, got to the resource and get familiar with all the configuration options discussed in the introduction talk.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(387),alt:"overview",title:"overview"}})]),s._v(" "),t("p",[s._v("Open the web app in your browser.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(388),alt:"browser",title:"browser"}})]),s._v(" "),t("h3",{attrs:{id:"option-2-azure-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option-2-azure-cli"}},[s._v("#")]),s._v(" Option 2: Azure CLI")]),s._v(" "),t("p",[s._v("If you have created the web application already with option 1, go to the portal and delete the resource group including all the newly created resources (you have to wait until it has finished, before proceeding). We will be creating the exact same resources now with the Azure CLI.")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("üìù You can check the results of each command in the Portal.")])]),s._v(" "),t("p",[s._v("First, let's create the resource group:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ az group create "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" myFirstWebApps-rg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--location")]),s._v(" westeurope\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myFirstWebApps-rg"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"location"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"westeurope"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"managedBy"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebApps-rg"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"properties"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"provisioningState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Succeeded"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tags"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Microsoft.Resources/resourceGroups"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("Next, add an App Service Plan:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ az appservice plan create "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" myFirstWebApps-rg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" myFirstWebAppsPlan "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--sku")]),s._v(" S1\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"freeOfferExpirationTime"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geoRegion"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"West Europe"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostingEnvironmentProfile"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hyperV"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myFirstWebApps-rg/providers/Microsoft.Web/serverfarms/myFirstWebAppsPlan"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"isSpot"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"isXenon"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"location"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"West Europe"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maximumElasticWorkerCount"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maximumNumberOfWorkers"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebAppsPlan"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"numberOfSites"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"perSiteScaling"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"provisioningState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Succeeded"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reserved"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"resourceGroup"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebApps-rg"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sku"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"capabilities"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"capacity"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"family"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"S"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"locations"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"S1"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"S1"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"skuCapacity"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tier"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Standard"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spotExpirationTime"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ready"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"subscription"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tags"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetWorkerCount"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetWorkerSizeId"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Microsoft.Web/serverfarms"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"workerTierName"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("When the App Service Plan has been created, we can add the Web App:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ az webapp create "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" myFirstWebApps-rg "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" myFirstWebAppsPlan "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" myFirstWebAppDevCollege\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"availabilityState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Normal"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clientAffinityEnabled"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clientCertEnabled"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clientCertExclusionPaths"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cloningInfo"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"containerSize"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dailyMemoryTimeQuota"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultHostName"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myfirstwebappdevcollege.azurewebsites.net"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"enabled"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"enabledHostNames"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myfirstwebappdevcollege.azurewebsites.net"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myfirstwebappdevcollege.scm.azurewebsites.net"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ftpPublishingUrl"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ftp://waws-prod-am2-217.ftp.azurewebsites.windows.net/site/wwwroot"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"geoDistributions"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostNameSslStates"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostType"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Standard"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ipBasedSslResult"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ipBasedSslState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NotConfigured"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myfirstwebappdevcollege.azurewebsites.net"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sslState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Disabled"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"thumbprint"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"toUpdate"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"toUpdateIpBasedSsl"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"virtualIp"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostType"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Repository"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ipBasedSslResult"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ipBasedSslState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NotConfigured"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myfirstwebappdevcollege.scm.azurewebsites.net"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sslState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Disabled"')]),s._v(",\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"thumbprint"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"toUpdate"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"toUpdateIpBasedSsl"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"virtualIp"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostNames"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myfirstwebappdevcollege.azurewebsites.net"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostNamesDisabled"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostingEnvironmentProfile"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"httpsOnly"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hyperV"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myFirstWebApps-rg/providers/Microsoft.Web/sites/myFirstWebAppDevCollege"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"identity"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"inProgressOperationId"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"isDefaultContainer"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"isXenon"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lastModifiedTimeUtc"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-01-13T13:17:15.623333"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"location"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"West Europe"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maxNumberOfWorkers"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebAppDevCollege"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"outboundIpAddresses"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"137.117.218.101,137.117.210.101,137.117.214.210,137.117.214.88,137.117.212.13"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"possibleOutboundIpAddresses"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"137.117.218.101,137.117.210.101,137.117.214.210,137.117.214.88,137.117.212.13,137.117.208.108,137.117.208.41,137.117.211.152"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redundancyMode"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"None"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repositorySiteName"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebAppDevCollege"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"reserved"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"resourceGroup"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebApps-rg"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scmSiteAlsoStopped"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"serverFarmId"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myFirstWebApps-rg/providers/Microsoft.Web/serverfarms/myFirstWebAppsPlan"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"siteConfig"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"slotSwapStatus"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"state"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Running"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"suspendedTill"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tags"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetSwapSlot"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"trafficManagerHostNames"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Microsoft.Web/sites"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usageState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Normal"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("The last step we need to have the same environment like when we created everything via the portal, is to add Application Insights. The Azure CLI Application Insights component is still in preview. To access it, you first need to run:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ az extension "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" application-insights\n\nThe installed extension "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'application-insights'")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" preview.\n")])])]),t("p",[s._v("Now, let's create the AppInsights component for our application:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[s._v("¬†")]),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ az monitor app-insights component create "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--app")]),s._v(" myFirstWebAppsAppIn "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--location")]),s._v(" westeurope "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--kind")]),s._v(" web "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" myFirstWebApps-rg  --application-type web\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"appId"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"14f1a266-629c-44aa-ad0f-9e09bed00f71"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"applicationId"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebAppsAppIn"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"applicationType"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"web"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"creationDate"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-01-13T06:23:58.761173+00:00"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"etag"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("0500a71d-0000-0200-0000-5e1c0cfe0000"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v('"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"flowType"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bluefield"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hockeyAppId"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hockeyAppToken"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myFirstWebApps-rg/providers/microsoft.insights/components/myFirstWebAppsAppIn"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"instrumentationKey"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8bfd7511-d6ad-4ea8-9a10-d0db786ec415"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"web"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"location"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"westeurope"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebAppsAppIn"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"provisioningState"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Succeeded"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"requestSource"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rest"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"resourceGroup"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstWebApps-rg"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"samplingPercentage"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tags"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tenantId"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"microsoft.insights/components"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("Add the Application Insights instrumentation key to your WebApp. Use the "),t("code",[s._v("instrumentation key")]),s._v(" from the above output in the next command.")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("az webapp config appsettings "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--settings")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("APPINSIGHTS_INSTRUMENTATIONKEY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("YOUR_INSTRUMENTATION_KEY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" myFirstWebAppDevCollege "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" myFirstWebApps-rg\n")])])]),t("p",[s._v("Now, we are all set to add a sample application.")]),s._v(" "),t("h2",{attrs:{id:"create-a-sample-application"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-a-sample-application"}},[s._v("#")]),s._v(" Create a Sample Application")]),s._v(" "),t("p",[s._v("We will use a .NET Core MVC application to demonstrate the deployment process to an Azure Web App. So first, let's create a demo application. Create a local folder called "),t("em",[s._v("devcollege")]),s._v(" and open it in the command-line.")]),s._v(" "),t("p",[t("code",[s._v("cd")]),s._v(" into that folder and execute:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ dotnet new mvc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" myFirstCoreApp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" net6.0\n\nThe template "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ASP.NET Core Web App (Model-View-Controller)"')]),s._v(" was created successfully.\nThis template contains technologies from parties other than Microsoft, see https://aka.ms/aspnetcore/3.0-third-party-notices "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" details.\n\nProcessing post-creation actions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nRunning "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dotnet restore'")]),s._v(" on myFirstCoreApp/myFirstCoreApp.csproj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n  Restore completed "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60.34")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" /Users/christiandennig/dev/myFirstCoreApp/myFirstCoreApp.csproj.\n\nRestore succeeded.\n")])])]),t("h3",{attrs:{id:"visual-studio-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#visual-studio-code"}},[s._v("#")]),s._v(" Visual Studio Code")]),s._v(" "),t("p",[s._v("After the wizard has finished, "),t("code",[s._v("cd")]),s._v(" into the new folder "),t("code",[s._v("myFirstCoreApp")]),s._v(" and open it in VS Code:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" myFirstCoreApp\ncode "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),t("p",[s._v("‚ö†Ô∏è If you just installed the .NET Core SDK please make sure to restart VSCode. If you've already created a "),t("code",[s._v(".vscode/launch.json")]),s._v(" delete it. Pay attention to the select boxes in the top middle of your screen that appear when vscode detects the .Net project aswell as the bottom right corner where it should ask you to restore the dotnet dependencies.")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(389),alt:"vscode",title:"vscode"}})]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("üìù Get familiar with the environment and have a look at the controller "),t("code",[s._v("HomeController")]),s._v(".")])]),s._v(" "),t("p",[s._v("Set a breakpoint ("),t("strong",[s._v("F9")]),s._v(") on method "),t("code",[s._v("public IActionResult Index()")]),s._v(" in "),t("code",[s._v("Controllers/HomeController.cs")]),s._v(".")]),s._v(" "),t("p",[s._v("Switch to the Run and Debug Tab, select "),t("em",[s._v("create a launch.json file")]),s._v(" and press "),t("strong",[s._v("F5")]),s._v(" afterwards. If VS Code asks you about the environment, choose "),t("em",[s._v(".NET Core")]),s._v(".")]),s._v(" "),t("p",[t("img",{attrs:{src:e(390),alt:"vscode",title:"vscode"}})]),s._v(" "),t("p",[s._v("The project will now be built and after that, your browser will point to "),t("a",{attrs:{href:"https:/localhost:5001",target:"_blank",rel:"noopener noreferrer"}},[s._v("https:/localhost:5001"),t("OutboundLink")],1),s._v(".")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("Here is a workaround, if port "),t("em",[s._v("5001")]),s._v(" is blocked on your machine.")]),s._v(" "),t("p",[s._v("Open file "),t("code",[s._v("launch.json")]),s._v(" in the folder "),t("code",[s._v(".vscode")]),s._v(" and add the env variable "),t("code",[s._v("ASPNETCORE_URLS")]),s._v(" with a value that works for you.")]),s._v(" "),t("p",[s._v("Example:")]),s._v(" "),t("p",[t("img",{attrs:{src:e(391),alt:"vscode-launch",title:"vscode-launch"}})])]),s._v(" "),t("h3",{attrs:{id:"debug-tools"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debug-tools"}},[s._v("#")]),s._v(" Debug Tools")]),s._v(" "),t("p",[s._v("When the breakpoint gets hit, get familiar with the tools of the debugger.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(392),alt:"vscode-debug",title:"vscode-debug"}})]),s._v(" "),t("p",[s._v("Open "),t("code",[s._v("Views/Home/Index.cshtml")]),s._v(' and change the welcome text to "Welcome to the Azure Developer College".')]),s._v(" "),t("p",[s._v("Run it again locally and check, if the changes appear.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(393),alt:"browser-welcome",title:"browser-welcome"}})]),s._v(" "),t("h2",{attrs:{id:"deploy-the-sample-app-to-azure"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-sample-app-to-azure"}},[s._v("#")]),s._v(" Deploy the Sample App to Azure")]),s._v(" "),t("p",[s._v('Now let\'s deploy the webapp to Azure. Therefore, open the "Azure Extension" on the left side of Visual Studio Code.')]),s._v(" "),t("p",[s._v("If you haven't done so far, add the Azure App Service Extension (see: "),t("RouterLink",{attrs:{to:"/day2/challenges/challenge-0.html"}},[s._v("Challenge 0: Setup your System")]),s._v(")")],1),s._v(" "),t("p",[s._v("Find your webapp in the extension and right-click --\x3e Deploy to Web App...")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("üìù If you can't find your subscription, press "),t("strong",[s._v("F1")]),s._v(" and choose the Task "),t("em",[s._v("Azure: Sign In")]),s._v(".")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(394),alt:"vscode-deploy",title:"vscode-deploy"}})]),s._v(" "),t("p",[t("img",{attrs:{src:e(395),alt:"vscode-deploying",title:"vscode-deploying"}})]),s._v(" "),t("p",[s._v("After a few seconds the browser will show you your first web app running in Azure.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(396),alt:"browser-webapp",title:"browser-webapp"}})]),s._v(" "),t("h2",{attrs:{id:"working-with-deployment-slots-optional-but-recommended"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#working-with-deployment-slots-optional-but-recommended"}},[s._v("#")]),s._v(" Working with Deployment Slots (optional - but recommended)")]),s._v(" "),t("p",[s._v("Open your web app in the portal and go to "),t("strong",[s._v('"Deployment Slots"')]),s._v(".")]),s._v(" "),t("p",[s._v("Create a new slot called "),t("strong",[s._v('"Staging"')]),s._v(" (choose "),t("strong",[s._v('"clone settings"')]),s._v(" from your production slot).")]),s._v(" "),t("p",[t("img",{attrs:{src:e(397),alt:"portal-staging",title:"portal-staging"}})]),s._v(" "),t("p",[s._v("When finished, go back to VS Code.")]),s._v(" "),t("h2",{attrs:{id:"deploy-sample-application-to-staging-slot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploy-sample-application-to-staging-slot"}},[s._v("#")]),s._v(" Deploy Sample Application to Staging Slot")]),s._v(" "),t("p",[s._v("Open "),t("code",[s._v("Views/Home/Index.cshtml")]),s._v(" again and change the welcome text to "),t("em",[s._v('"Welcome to the Azure Developer College - this time with slots!"')]),s._v(".")]),s._v(" "),t("p",[s._v("Check that your local development environment works as expected.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(398),alt:"browser-staging",title:"browser-staging"}})]),s._v(" "),t("p",[s._v("To deploy the application to the "),t("em",[s._v('"Staging"')]),s._v("_ slot, find your webapp in the "),t("strong",[s._v("Azure AppService extension")]),s._v(", drill down to "),t("strong",[s._v("Deployment Slots")]),s._v(" and right-click --\x3e "),t("strong",[s._v("Deploy to Slot...")])]),s._v(" "),t("p",[s._v("Your current application will now be deployed to your "),t("em",[s._v('"Staging"')]),s._v(" slot.")]),s._v(" "),t("h3",{attrs:{id:"show-staging-application"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#show-staging-application"}},[s._v("#")]),s._v(" Show Staging Application")]),s._v(" "),t("p",[s._v("To see your staging slot in action, go to the deployment slot in the portal and copy the URL in the overview blade.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(399),alt:"portal-slot-overview",title:"portal-slot-overview"}})]),s._v(" "),t("p",[s._v("Open your browser, navigate to the URL and check, if the headline contains the new text.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(400),alt:"browser-slot-website",title:"browser-slot-website"}})]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v('üìù Also check the production slot (URL without "-staging").')])]),s._v(" "),t("h3",{attrs:{id:"swapping-slots"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#swapping-slots"}},[s._v("#")]),s._v(" Swapping Slots")]),s._v(" "),t("p",[s._v("Now as everything works as expected, go back to "),t("strong",[s._v('"Deployment Slots"')]),s._v(" and click on "),t("strong",[s._v('"Swap"')]),s._v(" selecting the staging slot as source.")]),s._v(" "),t("p",[s._v("With this command, we are swapping the current "),t("em",[s._v('"production"')]),s._v(" slot with our "),t("em",[s._v('"Staging"')]),s._v(" slot, which basically means that the load balancer in front of our Web App points to "),t("em",[s._v('"Staging"')]),s._v(" and promotes it as the new "),t("em",[s._v('"production"')]),s._v(" slot.")]),s._v(" "),t("p",[t("img",{attrs:{src:e(401),alt:"portal-swap",title:"portal-swap"}})]),s._v(" "),t("p",[s._v("Now check, that the production slot serves the new version of the website.")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("üìù Split traffic 50:50 to staging and production a see what happens when you reload your page in the browser pointing to the "),t("em",[s._v("production")]),s._v(" slot. What do you think, why does this happen?")])]),s._v(" "),t("h2",{attrs:{id:"azure-samples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#azure-samples"}},[s._v("#")]),s._v(" Azure Samples")]),s._v(" "),t("p",[s._v("Azure AppService code samples:")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.microsoft.com/samples/browse/?expanded=azure&products=azure-app-service%2Cazure-app-service-web",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.microsoft.com/samples/browse/?expanded=azure&products=azure-app-service%2Cazure-app-service-web"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"cleanup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cleanup"}},[s._v("#")]),s._v(" Cleanup")]),s._v(" "),t("p",[s._v("Remove the sample resource group via:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("az group delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" myFirstWebApps-rg\n")])])]),t("p",[t("RouterLink",{attrs:{to:"/day2/challenges/00-challenge-setup.html"}},[s._v("‚óÄ Previous challenge")]),s._v(" | "),t("RouterLink",{attrs:{to:"/day2/"}},[s._v("üîº Day 2")]),s._v(" | "),t("RouterLink",{attrs:{to:"/day2/challenges/02-challenge-bo-1.html"}},[s._v("Next challenge ‚ñ∂")])],1)])}),[],!1,null,null,null);t.default=n.exports}}]);